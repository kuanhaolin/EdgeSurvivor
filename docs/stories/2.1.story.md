# Story 2.1: å»ºç«‹æ–°æ´»å‹•

## Status

Draft

## Story

**As a** ä½¿ç”¨è€…,
**I want** å¡«å¯«ä¸€å€‹åŒ…å«æ‰€æœ‰å¿…è¦è³‡è¨Šï¼ˆæ¨™é¡Œã€æ—¥æœŸã€åœ°é»ã€æè¿°ã€é¡å‹ã€äººæ•¸ã€è²»ç”¨ã€å°é¢åœ–ï¼‰çš„è¡¨å–®ä¾†å»ºç«‹æ–°æ´»å‹•,
**so that** æˆ‘å¯ä»¥é–‹å§‹æ‹›å‹Ÿæ—…ä¼´ã€‚

## Acceptance Criteria

### æ´»å‹•è¡¨å–®é¡¯ç¤º

1. ä½¿ç”¨è€…å¯ä»¥å­˜å–ã€Œå»ºç«‹æ´»å‹•ã€é é¢ï¼ˆ`/activities/create`ï¼‰
2. é é¢æ‡‰é¡¯ç¤ºæ´»å‹•å»ºç«‹è¡¨å–®ï¼ŒåŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š
   - æ¨™é¡Œï¼ˆå¿…å¡«ï¼Œæ–‡å­—è¼¸å…¥ï¼‰
   - æ´»å‹•é¡å‹ï¼ˆå¿…å¡«ï¼Œä¸‹æ‹‰é¸å–®ï¼‰
   - åœ°é»ï¼ˆå¿…å¡«ï¼Œæ–‡å­—è¼¸å…¥ï¼‰
   - é–‹å§‹æ—¥æœŸï¼ˆå¿…å¡«ï¼Œæ—¥æœŸé¸æ“‡å™¨ï¼‰
   - çµæŸæ—¥æœŸï¼ˆé¸å¡«ï¼Œæ—¥æœŸé¸æ“‡å™¨ï¼‰
   - äººæ•¸ä¸Šé™ï¼ˆå¿…å¡«ï¼Œæ•¸å­—è¼¸å…¥ï¼Œæœ€å°å€¼ 2ï¼‰
   - æè¿°ï¼ˆé¸å¡«ï¼Œå¤šè¡Œæ–‡å­—è¼¸å…¥ï¼‰
   - é ä¼°è²»ç”¨ï¼ˆé¸å¡«ï¼Œæ•¸å­—è¼¸å…¥ï¼‰
   - å°é¢åœ–ç‰‡ï¼ˆé¸å¡«ï¼Œåœ–ç‰‡ä¸Šå‚³ï¼‰
3. æ‰€æœ‰å¿…å¡«æ¬„ä½æ‡‰æœ‰æ¸…æ¥šçš„æ¨™ç¤ºï¼ˆç´…è‰²æ˜Ÿè™Ÿï¼‰
4. è¡¨å–®æ‡‰ä½¿ç”¨éŸ¿æ‡‰å¼è¨­è¨ˆï¼Œé©é…æ‰‹æ©Ÿèˆ‡å¹³æ¿

### è¡¨å–®é©—è­‰

5. æ¨™é¡Œæ¬„ä½æ‡‰é©—è­‰ï¼š
   - éç©º
   - é•·åº¦ä¸è¶…é 200 å­—å…ƒ
6. æ´»å‹•é¡å‹æ‡‰æä¾›é è¨­é¸é …ï¼š
   - å†’éšªã€æ–‡åŒ–ã€ä¼‘é–’ã€é‹å‹•ã€ç¾é£Ÿã€å…¶ä»–
7. åœ°é»æ¬„ä½æ‡‰é©—è­‰ï¼š
   - éç©º
   - é•·åº¦ä¸è¶…é 200 å­—å…ƒ
8. æ—¥æœŸæ¬„ä½æ‡‰é©—è­‰ï¼š
   - é–‹å§‹æ—¥æœŸå¿…å¡«ä¸”ä¸èƒ½æ—©æ–¼ä»Šå¤©
   - çµæŸæ—¥æœŸè‹¥å¡«å¯«ï¼Œéœ€æ™šæ–¼æˆ–ç­‰æ–¼é–‹å§‹æ—¥æœŸ
9. äººæ•¸ä¸Šé™æ‡‰é©—è­‰ï¼š
   - å¿…å¡«
   - æœ€å°å€¼ç‚º 2
   - æœ€å¤§å€¼ç‚º 50
10. æè¿°æ¬„ä½è‹¥å¡«å¯«ï¼Œé•·åº¦å»ºè­°ä¸è¶…é 1000 å­—å…ƒ
11. è²»ç”¨æ¬„ä½è‹¥å¡«å¯«ï¼Œæ‡‰ç‚ºéè² æ•¸
12. å°é¢åœ–ç‰‡è‹¥ä¸Šå‚³ï¼Œæ‡‰é©—è­‰ï¼š
    - æª”æ¡ˆæ ¼å¼ç‚º JPG, PNG, WEBP
    - æª”æ¡ˆå¤§å°ä¸è¶…é 5MB

### æäº¤èˆ‡å„²å­˜

13. é»æ“Šã€Œå»ºç«‹æ´»å‹•ã€æŒ‰éˆ•æ‡‰æäº¤è¡¨å–®
14. æäº¤å‰æ‡‰å†æ¬¡é©—è­‰æ‰€æœ‰æ¬„ä½
15. é©—è­‰å¤±æ•—æ™‚é¡¯ç¤ºå…·é«”çš„éŒ¯èª¤è¨Šæ¯
16. æäº¤æˆåŠŸå¾Œï¼š
    - é¡¯ç¤ºæˆåŠŸè¨Šæ¯ã€Œæ´»å‹•å»ºç«‹æˆåŠŸï¼ã€
    - è‡ªå‹•è·³è½‰è‡³æ´»å‹•è©³æƒ…é ï¼ˆ`/activities/{activity_id}`ï¼‰
17. æ´»å‹•å»ºç«‹è€…è‡ªå‹•æˆç‚ºè©²æ´»å‹•çš„çµ„ç¹”è€…ï¼ˆcreatorï¼‰
18. æ´»å‹•é è¨­ç‹€æ…‹ç‚ºã€Œé–‹æ”¾ã€ï¼ˆopen/æ‹›å‹Ÿä¸­ï¼‰
19. å»ºç«‹è€…è‡ªå‹•åŠ å…¥åƒèˆ‡è€…åˆ—è¡¨ï¼Œç‹€æ…‹ç‚º 'joined'ï¼Œè§’è‰²ç‚º 'creator'

### éŒ¯èª¤è™•ç†

20. ç¶²è·¯éŒ¯èª¤æ™‚é¡¯ç¤ºå‹å–„çš„éŒ¯èª¤è¨Šæ¯
21. å¾Œç«¯é©—è­‰å¤±æ•—æ™‚é¡¯ç¤ºå…·é«”çš„éŒ¯èª¤æç¤º
22. æä¾›ã€Œå–æ¶ˆã€æˆ–ã€Œè¿”å›ã€æŒ‰éˆ•ï¼Œè¿”å›æ´»å‹•åˆ—è¡¨é 

### æ•ˆèƒ½èˆ‡é«”é©—

23. API å›æ‡‰æ™‚é–“éœ€ä½æ–¼ 1000ms
24. åœ–ç‰‡ä¸Šå‚³æ‡‰é¡¯ç¤ºä¸Šå‚³é€²åº¦
25. æäº¤æ™‚é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹ï¼ˆé˜²æ­¢é‡è¤‡æäº¤ï¼‰
26. èªè­‰å¤±æ•ˆæ™‚è‡ªå‹•è·³è½‰è‡³ç™»å…¥é 

## Tasks / Subtasks

> **ğŸ”§ Brownfield å°ˆæ¡ˆèªªæ˜**ï¼šå¾Œç«¯å·²å¯¦ä½œå»ºç«‹æ´»å‹• API (`POST /api/activities`)ã€‚æœ¬ Story è‘—é‡æ–¼**å»ºç«‹å‰ç«¯å»ºç«‹æ´»å‹•é é¢**ã€**æ•´åˆç¾æœ‰ API**ï¼Œä»¥åŠ**è¨­è¨ˆå„ªè³ªçš„è¡¨å–®é«”é©—**ã€‚

### Phase 1: å¾Œç«¯ API é©—è­‰

- [ ] **Task 1: é©—è­‰å»ºç«‹æ´»å‹• API** (AC: 13, 16, 17, 18, 19, 23)
  - [ ] âœ… ç¢ºèª `backend/blueprints/activities.py` ä¸­çš„ `create_activity()` ç«¯é»å­˜åœ¨
  - [ ] âœ… é©—è­‰ç«¯é»è·¯å¾‘ç‚º `POST /api/activities`
  - [ ] âœ… æª¢æŸ¥éœ€è¦ JWT èªè­‰ (`@jwt_required()`)
  - [ ] âœ… é©—è­‰è«‹æ±‚ body æ ¼å¼ï¼š
    ```json
    {
      "title": "string",
      "type": "string",
      "location": "string",
      "start_date": "ISO date string",
      "end_date": "ISO date string (optional)",
      "max_members": "integer",
      "description": "string (optional)",
      "status": "string (é»˜èª 'open')"
    }
    ```
  - [ ] âœ… ç¢ºèªå›æ‡‰æ ¼å¼åŒ…å«ï¼š
    ```json
    {
      "message": "æ´»å‹•å‰µå»ºæˆåŠŸ",
      "activity": {
        "activity_id": "integer",
        "title": "string",
        "creator_id": "integer",
        "status": "string",
        // ...å…¶ä»–æ¬„ä½
      }
    }
    ```
  - [ ] âœ… é©—è­‰å‰µå»ºè€…è‡ªå‹•åŠ å…¥ç‚ºåƒèˆ‡è€…ï¼ˆrole='creator', status='joined'ï¼‰
  - [ ] âœ… æ¸¬è©¦ API å›æ‡‰æ™‚é–“ < 1000ms
  - [ ] ğŸ“ è¨˜éŒ„ä»»ä½•èˆ‡è¦æ ¼ä¸ç¬¦çš„åœ°æ–¹

### Phase 2: å‰ç«¯é é¢å»ºç«‹

- [ ] **Task 2: å»ºç«‹ CreateActivity.vue é é¢** (AC: 1, 2, 3, 4)
  - [ ] â• åœ¨ `frontend/src/views/` å»ºç«‹æˆ–ç¢ºèª `CreateActivity.vue`
  - [ ] â• ä½¿ç”¨ Composition API æ¶æ§‹
  - [ ] â• è¨­è¨ˆé é¢ä½ˆå±€ï¼š
    - é é¢æ¨™é¡Œã€Œå»ºç«‹æ–°æ´»å‹•ã€
    - è¡¨å–®å€å¡Šï¼ˆä½¿ç”¨ Element Plus Form çµ„ä»¶ï¼‰
    - æ“ä½œæŒ‰éˆ•å€ï¼ˆæäº¤ã€å–æ¶ˆï¼‰
  - [ ] â• æ·»åŠ å°èˆªå®ˆè¡›ï¼ˆéœ€ç™»å…¥æ‰èƒ½å­˜å–ï¼‰
  - [ ] â• è¨­è¨ˆéŸ¿æ‡‰å¼ä½ˆå±€ï¼ˆä½¿ç”¨ Grid æˆ– Flexï¼‰

- [ ] **Task 3: å¯¦ä½œæ´»å‹•è¡¨å–®çµ„ä»¶** (AC: 2, 3, 5, 6, 7, 8, 9, 10, 11, 12)
  - [ ] â• å»ºç«‹è¡¨å–®æ•¸æ“šçµæ§‹ï¼ˆä½¿ç”¨ `ref` æˆ– `reactive`ï¼‰ï¼š
    ```javascript
    const activityForm = reactive({
      title: '',
      type: '',
      location: '',
      start_date: '',
      end_date: '',
      max_members: 2,
      description: '',
      cost: null,
      cover_image: null
    })
    ```
  - [ ] â• ä½¿ç”¨ Element Plus çµ„ä»¶ï¼š
    - `<el-input>` for æ¨™é¡Œã€åœ°é»ã€æè¿°
    - `<el-select>` for æ´»å‹•é¡å‹
    - `<el-date-picker>` for æ—¥æœŸ
    - `<el-input-number>` for äººæ•¸ã€è²»ç”¨
    - `<el-upload>` for å°é¢åœ–ç‰‡ï¼ˆå¾…å¯¦ä½œï¼‰
  - [ ] â• æ·»åŠ å¿…å¡«æ¬„ä½æ¨™è¨˜ï¼ˆ`:required="true"`ï¼‰
  - [ ] â• è¨­è¨ˆæ´»å‹•é¡å‹é¸é …ï¼š
    - adventure (å†’éšª)
    - culture (æ–‡åŒ–)
    - leisure (ä¼‘é–’)
    - sports (é‹å‹•)
    - food (ç¾é£Ÿ)
    - other (å…¶ä»–)

- [ ] **Task 4: å¯¦ä½œè¡¨å–®é©—è­‰è¦å‰‡** (AC: 5, 6, 7, 8, 9, 10, 11, 12, 14, 15)
  - [ ] â• ä½¿ç”¨ Element Plus Form Validation
  - [ ] â• å»ºç«‹é©—è­‰è¦å‰‡å°è±¡ï¼š
    ```javascript
    const rules = {
      title: [
        { required: true, message: 'è«‹è¼¸å…¥æ´»å‹•æ¨™é¡Œ', trigger: 'blur' },
        { max: 200, message: 'æ¨™é¡Œé•·åº¦ä¸èƒ½è¶…é200å­—å…ƒ', trigger: 'blur' }
      ],
      type: [
        { required: true, message: 'è«‹é¸æ“‡æ´»å‹•é¡å‹', trigger: 'change' }
      ],
      location: [
        { required: true, message: 'è«‹è¼¸å…¥æ´»å‹•åœ°é»', trigger: 'blur' },
        { max: 200, message: 'åœ°é»é•·åº¦ä¸èƒ½è¶…é200å­—å…ƒ', trigger: 'blur' }
      ],
      start_date: [
        { required: true, message: 'è«‹é¸æ“‡é–‹å§‹æ—¥æœŸ', trigger: 'change' },
        { validator: validateStartDate, trigger: 'change' }
      ],
      end_date: [
        { validator: validateEndDate, trigger: 'change' }
      ],
      max_members: [
        { required: true, message: 'è«‹è¼¸å…¥äººæ•¸ä¸Šé™', trigger: 'blur' },
        { type: 'number', min: 2, max: 50, message: 'äººæ•¸éœ€åœ¨2-50ä¹‹é–“', trigger: 'blur' }
      ],
      description: [
        { max: 1000, message: 'æè¿°é•·åº¦å»ºè­°ä¸è¶…é1000å­—å…ƒ', trigger: 'blur' }
      ],
      cost: [
        { type: 'number', min: 0, message: 'è²»ç”¨ä¸èƒ½ç‚ºè² æ•¸', trigger: 'blur' }
      ]
    }
    ```
  - [ ] â• å¯¦ä½œè‡ªå®šç¾©é©—è­‰å™¨ï¼š
    - `validateStartDate`: æª¢æŸ¥ä¸æ—©æ–¼ä»Šå¤©
    - `validateEndDate`: æª¢æŸ¥ä¸æ—©æ–¼é–‹å§‹æ—¥æœŸ
  - [ ] â• å¯¦ä½œå³æ™‚é©—è­‰åé¥‹

### Phase 3: API æœå‹™æ•´åˆ

- [ ] **Task 5: æ“´å±• Activities API æœå‹™** (AC: 13, 16)
  - [ ] â• åœ¨ `frontend/src/api/activities.js` æ·»åŠ æˆ–ç¢ºèª `createActivity()` å‡½æ•¸
  - [ ] â• å‡½æ•¸æ‡‰èª¿ç”¨ `POST /api/activities`
  - [ ] â• è™•ç†è«‹æ±‚æ•¸æ“šæ ¼å¼è½‰æ›ï¼š
    ```javascript
    export const createActivity = (activityData) => {
      return axios.post('/activities', {
        title: activityData.title,
        type: activityData.type,
        location: activityData.location,
        start_date: activityData.start_date, // ISO date string
        end_date: activityData.end_date || null,
        max_members: activityData.max_members,
        description: activityData.description || '',
        status: 'open'
      })
    }
    ```
  - [ ] â• è¿”å› Promise with response data

- [ ] **Task 6: å¯¦ä½œè¡¨å–®æäº¤é‚è¼¯** (AC: 13, 14, 15, 16, 17, 20, 21, 25)
  - [ ] â• å»ºç«‹ `handleSubmit` å‡½æ•¸
  - [ ] â• ä½¿ç”¨ `formRef.validate()` é€²è¡Œè¡¨å–®é©—è­‰
  - [ ] â• é©—è­‰é€šéå¾Œèª¿ç”¨ `createActivity()` API
  - [ ] â• å¯¦ä½œè¼‰å…¥ç‹€æ…‹ç®¡ç†ï¼ˆ`loading` refï¼‰
  - [ ] â• æäº¤æ™‚ç¦ç”¨æŒ‰éˆ•é˜²æ­¢é‡è¤‡æäº¤
  - [ ] â• å¯¦ä½œéŒ¯èª¤è™•ç†ï¼š
    - æ•ç² API éŒ¯èª¤
    - é¡¯ç¤ºå…·é«”éŒ¯èª¤è¨Šæ¯ï¼ˆä½¿ç”¨ `ElMessage.error()`ï¼‰
  - [ ] â• è™•ç†èªè­‰å¤±æ•ˆï¼ˆ401ï¼‰ï¼šè‡ªå‹•è·³è½‰è‡³ç™»å…¥é 
  - [ ] â• æˆåŠŸå¾Œï¼š
    - é¡¯ç¤ºæˆåŠŸè¨Šæ¯ï¼ˆä½¿ç”¨ `ElMessage.success()`ï¼‰
    - ä½¿ç”¨ `router.push()` è·³è½‰è‡³æ´»å‹•è©³æƒ…é 

- [ ] **Task 7: å¯¦ä½œå–æ¶ˆæŒ‰éˆ•é‚è¼¯** (AC: 22)
  - [ ] â• æ·»åŠ ã€Œå–æ¶ˆã€æŒ‰éˆ•
  - [ ] â• é»æ“Šå–æ¶ˆæ™‚è·³è½‰è‡³æ´»å‹•åˆ—è¡¨é  (`/activities`)
  - [ ] â• è‹¥è¡¨å–®å·²å¡«å¯«ï¼Œé¡¯ç¤ºç¢ºèªå°è©±æ¡†ï¼š
    - ä½¿ç”¨ `ElMessageBox.confirm()`
    - æç¤ºã€Œæ‚¨æœ‰æœªå„²å­˜çš„è®Šæ›´ï¼Œç¢ºå®šè¦é›¢é–‹å—ï¼Ÿã€

### Phase 4: UI/UX å„ªåŒ–

- [ ] **Task 8: å¯¦ä½œæ—¥æœŸé¸æ“‡å™¨é…ç½®** (AC: 8)
  - [ ] â• è¨­å®šé–‹å§‹æ—¥æœŸé¸æ“‡å™¨çš„ `disabledDate` å‡½æ•¸
  - [ ] â• ç¦ç”¨ä»Šå¤©ä¹‹å‰çš„æ—¥æœŸ
  - [ ] â• è¨­å®šçµæŸæ—¥æœŸé¸æ“‡å™¨çš„ `disabledDate` å‡½æ•¸
  - [ ] â• ç¦ç”¨é–‹å§‹æ—¥æœŸä¹‹å‰çš„æ—¥æœŸ
  - [ ] â• ä½¿ç”¨æ—¥æœŸç¯„åœé¸æ“‡å™¨ï¼ˆ`type="daterange"`ï¼‰ä»¥æå‡ UX

- [ ] **Task 9: å¯¦ä½œè¡¨å–®æ¨£å¼èˆ‡ä½ˆå±€** (AC: 4, 25)
  - [ ] â• ä½¿ç”¨ Element Plus `<el-form>` çµ„ä»¶
  - [ ] â• è¨­å®š `label-width="120px"` æˆ–éŸ¿æ‡‰å¼èª¿æ•´
  - [ ] â• ä½¿ç”¨ Grid ä½ˆå±€å¯¦ç¾éŸ¿æ‡‰å¼è¨­è¨ˆï¼š
    - æ¡Œé¢ç‰ˆï¼šé›™æ¬„ä½ˆå±€
    - å¹³æ¿/æ‰‹æ©Ÿç‰ˆï¼šå–®æ¬„ä½ˆå±€
  - [ ] â• æ·»åŠ è¼‰å…¥ç‹€æ…‹æŒ‡ç¤ºå™¨
  - [ ] â• æ·»åŠ åœ–ç¤ºå¢å¼·è¦–è¦ºæ•ˆæœ
  - [ ] â• ç¢ºä¿å°è¢å¹•ä¸Šçš„å¯è®€æ€§èˆ‡å¯æ“ä½œæ€§

- [ ] **Task 10: å¯¦ä½œåœ–ç‰‡ä¸Šå‚³åŠŸèƒ½ï¼ˆé¸åšï¼‰** (AC: 12, 24)
  - [ ] âš ï¸ ç¢ºèªå¾Œç«¯ä¸Šå‚³ API æ˜¯å¦å·²å¯¦ä½œ
  - [ ] â• è‹¥å·²å¯¦ä½œï¼Œæ·»åŠ  `<el-upload>` çµ„ä»¶
  - [ ] â• è¨­å®šæª”æ¡ˆé¡å‹é™åˆ¶ï¼ˆ`accept="image/jpeg,image/png,image/webp"`ï¼‰
  - [ ] â• è¨­å®šæª”æ¡ˆå¤§å°é™åˆ¶ï¼ˆ5MBï¼‰
  - [ ] â• å¯¦ä½œä¸Šå‚³å‰é©—è­‰ï¼ˆ`before-upload` hookï¼‰
  - [ ] â• é¡¯ç¤ºä¸Šå‚³é€²åº¦
  - [ ] â• é¡¯ç¤ºé è¦½åœ–ç‰‡
  - [ ] â• è‹¥æœªå¯¦ä½œï¼Œæš«æ™‚éš±è—æ­¤æ¬„ä½

### Phase 5: è·¯ç”±èˆ‡å°èˆª

- [ ] **Task 11: è·¯ç”±é…ç½®** (AC: 1, 26)
  - [ ] â• åœ¨ `frontend/src/router/index.js` ç¢ºèªå»ºç«‹æ´»å‹•è·¯ç”±
  - [ ] â• è·¯ç”±é…ç½®ï¼š
    ```javascript
    {
      path: '/activities/create',
      name: 'CreateActivity',
      component: () => import('@/views/CreateActivity.vue'),
      meta: { 
        requiresAuth: true, 
        title: 'å»ºç«‹æ–°æ´»å‹•' 
      }
    }
    ```
  - [ ] â• æ·»åŠ è·¯ç”±å®ˆè¡›ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] â• æ¸¬è©¦è·¯ç”±å°èˆªåŠŸèƒ½

- [ ] **Task 12: å°èˆªé€£çµæ•´åˆ** (AC: 1)
  - [ ] â• åœ¨æ´»å‹•åˆ—è¡¨é æ·»åŠ ã€Œå»ºç«‹æ´»å‹•ã€æŒ‰éˆ•
  - [ ] â• åœ¨å°èˆªæ¬„ï¼ˆNavBarï¼‰æ·»åŠ ã€Œå»ºç«‹æ´»å‹•ã€é€£çµï¼ˆå¯é¸ï¼‰
  - [ ] â• é©—è­‰å°èˆªåŠŸèƒ½æ­£å¸¸

### Phase 6: æ¸¬è©¦èˆ‡é©—è­‰

- [ ] **Task 13: å‰ç«¯æ¸¬è©¦å»ºç«‹** (AC: 5, 6, 7, 8, 9, 14, 15)
  - [ ] â• åœ¨ `frontend/tests/unit/views/` å»ºç«‹ `CreateActivity.spec.js`
  - [ ] â• å¯¦ä½œæ¸¬è©¦æ¡ˆä¾‹ï¼š
    - [ ] æ¸¬è©¦é é¢æ­£ç¢ºæ¸²æŸ“
    - [ ] æ¸¬è©¦æ‰€æœ‰è¡¨å–®æ¬„ä½é¡¯ç¤º
    - [ ] æ¸¬è©¦å¿…å¡«æ¬„ä½é©—è­‰
    - [ ] æ¸¬è©¦æ¨™é¡Œé•·åº¦é©—è­‰
    - [ ] æ¸¬è©¦æ—¥æœŸé©—è­‰ï¼ˆä¸æ—©æ–¼ä»Šå¤©ï¼‰
    - [ ] æ¸¬è©¦çµæŸæ—¥æœŸé©—è­‰ï¼ˆä¸æ—©æ–¼é–‹å§‹æ—¥æœŸï¼‰
    - [ ] æ¸¬è©¦äººæ•¸ç¯„åœé©—è­‰ï¼ˆ2-50ï¼‰
    - [ ] æ¸¬è©¦è¡¨å–®æäº¤ï¼ˆMock APIï¼‰
    - [ ] æ¸¬è©¦æˆåŠŸè·³è½‰
    - [ ] æ¸¬è©¦éŒ¯èª¤è™•ç†
    - [ ] æ¸¬è©¦å–æ¶ˆæŒ‰éˆ•
  - [ ] â• Mock `createActivity` API
  - [ ] ğŸ§ª åŸ·è¡Œæ¸¬è©¦ï¼š`npm run test:unit`
  - [ ] ğŸ“Š ç¢ºèªè¦†è“‹ç‡ > 80%

- [ ] **Task 14: å¾Œç«¯æ¸¬è©¦è£œå……** (AC: 16, 17, 18, 19)
  - [ ] âœ… ç¢ºèª `backend/tests/test_activities.py` ä¸­å·²æœ‰å»ºç«‹æ´»å‹•æ¸¬è©¦
  - [ ] â• è‹¥ç¼ºå¤±ï¼Œæ·»åŠ æ¸¬è©¦æ¡ˆä¾‹ï¼š
    - [ ] æ¸¬è©¦æˆåŠŸå»ºç«‹æ´»å‹•
    - [ ] æ¸¬è©¦å¿…å¡«æ¬„ä½é©—è­‰
    - [ ] æ¸¬è©¦å‰µå»ºè€…è‡ªå‹•åŠ å…¥ç‚ºåƒèˆ‡è€…
    - [ ] æ¸¬è©¦æ´»å‹•é è¨­ç‹€æ…‹ç‚º 'open'
    - [ ] æ¸¬è©¦æœªèªè­‰è«‹æ±‚ï¼ˆæ‡‰è¿”å› 401ï¼‰
    - [ ] æ¸¬è©¦ç„¡æ•ˆæ•¸æ“šï¼ˆæ‡‰è¿”å› 400ï¼‰
  - [ ] ğŸ§ª åŸ·è¡Œæ¸¬è©¦ï¼š`pytest backend/tests/test_activities.py -v -k "create"`
  - [ ] ğŸ“Š ç¢ºèªæ‰€æœ‰æ¸¬è©¦é€šé

### Phase 7: æ•´åˆæ¸¬è©¦

- [ ] **Task 15: ç«¯åˆ°ç«¯åŠŸèƒ½é©—è­‰** (æ‰€æœ‰ AC)
  - [ ] ğŸ§ª æ‰‹å‹•æ¸¬è©¦æ¸…å–®ï¼š
    - [ ] **æ¸¬è©¦ 1**: è¨ªå•å»ºç«‹æ´»å‹•é é¢
      - ç™»å…¥å¸³è™Ÿ
      - è¨ªå• http://localhost:8080/activities/create
      - é©—è­‰ï¼šè¡¨å–®æ­£ç¢ºé¡¯ç¤ºæ‰€æœ‰æ¬„ä½
      - é©—è­‰ï¼šå¿…å¡«æ¬„ä½æœ‰ç´…è‰²æ˜Ÿè™Ÿæ¨™è¨˜
    - [ ] **æ¸¬è©¦ 2**: è¡¨å–®é©—è­‰
      - å˜—è©¦æäº¤ç©ºè¡¨å–®
      - é©—è­‰ï¼šé¡¯ç¤ºå¿…å¡«æ¬„ä½éŒ¯èª¤è¨Šæ¯
      - å¡«å¯«è¶…é 200 å­—çš„æ¨™é¡Œ
      - é©—è­‰ï¼šé¡¯ç¤ºé•·åº¦é™åˆ¶éŒ¯èª¤
      - é¸æ“‡éå»çš„æ—¥æœŸ
      - é©—è­‰ï¼šé¡¯ç¤ºæ—¥æœŸéŒ¯èª¤è¨Šæ¯
      - è¨­å®šçµæŸæ—¥æœŸæ—©æ–¼é–‹å§‹æ—¥æœŸ
      - é©—è­‰ï¼šé¡¯ç¤ºæ—¥æœŸé‚è¼¯éŒ¯èª¤
    - [ ] **æ¸¬è©¦ 3**: æˆåŠŸå»ºç«‹æ´»å‹•
      - å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½ï¼š
        - æ¨™é¡Œï¼šã€Œæ¸¬è©¦æ´»å‹•ã€
        - é¡å‹ï¼šã€Œä¼‘é–’ã€
        - åœ°é»ï¼šã€Œå°åŒ—å¸‚ã€
        - é–‹å§‹æ—¥æœŸï¼šæ˜å¤©
        - äººæ•¸ä¸Šé™ï¼š5
      - é»æ“Šã€Œå»ºç«‹æ´»å‹•ã€
      - é©—è­‰ï¼šé¡¯ç¤ºæˆåŠŸè¨Šæ¯
      - é©—è­‰ï¼šè·³è½‰è‡³æ´»å‹•è©³æƒ…é 
      - é©—è­‰ï¼šæ´»å‹•ç‹€æ…‹ç‚ºã€Œæ‹›å‹Ÿä¸­ã€
      - é©—è­‰ï¼šå‰µå»ºè€…å·²åœ¨åƒèˆ‡è€…åˆ—è¡¨ä¸­
    - [ ] **æ¸¬è©¦ 4**: é¸å¡«æ¬„ä½
      - å»ºç«‹æ´»å‹•æ™‚å¡«å¯«æè¿°å’Œè²»ç”¨
      - é©—è­‰ï¼šè³‡æ–™æ­£ç¢ºå„²å­˜
      - å»ºç«‹æ´»å‹•æ™‚å¡«å¯«çµæŸæ—¥æœŸ
      - é©—è­‰ï¼šæ—¥æœŸç¯„åœæ­£ç¢ºé¡¯ç¤º
    - [ ] **æ¸¬è©¦ 5**: å–æ¶ˆæ“ä½œ
      - é–‹å§‹å¡«å¯«è¡¨å–®
      - é»æ“Šã€Œå–æ¶ˆã€æŒ‰éˆ•
      - é©—è­‰ï¼šé¡¯ç¤ºç¢ºèªå°è©±æ¡†
      - ç¢ºèªå–æ¶ˆ
      - é©—è­‰ï¼šè·³è½‰å›æ´»å‹•åˆ—è¡¨é 
    - [ ] **æ¸¬è©¦ 6**: éŒ¯èª¤è™•ç†
      - æ¨¡æ“¬ç¶²è·¯éŒ¯èª¤ï¼ˆé—œé–‰å¾Œç«¯ï¼‰
      - å˜—è©¦å»ºç«‹æ´»å‹•
      - é©—è­‰ï¼šé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
      - é©—è­‰ï¼šè¡¨å–®æ•¸æ“šä¿ç•™
    - [ ] **æ¸¬è©¦ 7**: èªè­‰ä¿è­·
      - ç™»å‡ºç‹€æ…‹è¨ªå• /activities/create
      - é©—è­‰ï¼šè·³è½‰è‡³ç™»å…¥é 
    - [ ] **æ¸¬è©¦ 8**: éŸ¿æ‡‰å¼è¨­è¨ˆ
      - åœ¨æ¡Œé¢æ¨¡å¼æ¸¬è©¦ï¼ˆé›™æ¬„ä½ˆå±€ï¼‰
      - åœ¨æ‰‹æ©Ÿæ¨¡å¼æ¸¬è©¦ï¼ˆå–®æ¬„ä½ˆå±€ï¼‰
      - é©—è­‰ï¼šæ‰€æœ‰æ¬„ä½åœ¨å°è¢å¹•ä¸Šå¯æ“ä½œ
    - [ ] **æ¸¬è©¦ 9**: æ•ˆèƒ½æ¸¬è©¦
      - ä½¿ç”¨ DevTools Network é¢æ¿
      - é©—è­‰ï¼šAPI å›æ‡‰æ™‚é–“ < 1000ms
      - é©—è­‰ï¼šè¡¨å–®æ“ä½œæµæš¢
  - [ ] ğŸ“Š é©—è­‰æ‰€æœ‰ AC æ»¿è¶³
  - [ ] ğŸ“ è¨˜éŒ„æ‰€æœ‰æ¸¬è©¦çµæœ

### åœ–ä¾‹èªªæ˜
- âœ… **å·²å­˜åœ¨ä¸”æ­£ç¢º** - é©—è­‰é€šéå³å¯
- âš ï¸ **éœ€è¦æª¢æŸ¥** - å¯èƒ½éœ€è¦èª¿æ•´
- â• **éœ€è¦æ–°å¢** - ç¼ºå¤±çš„åŠŸèƒ½
- ğŸ”„ **éœ€è¦é‡æ§‹** - éœ€è¦æ”¹é€²ç¾æœ‰å¯¦ä½œ
- ğŸ“ **è¨˜éŒ„** - æ–‡ä»¶åŒ–ç™¼ç¾
- ğŸ§ª **æ¸¬è©¦** - åŸ·è¡Œæ¸¬è©¦
- ğŸ“Š **é©—è­‰** - ç¢ºèªç¬¦åˆéœ€æ±‚

## Dev Notes

### Previous Story Insights

**ä¾†è‡ª Story 1.1 - 1.6 çš„ç¶“é©—**ï¼š
- âœ… Vue 3 Composition API æ˜¯æ¨™æº–é–‹ç™¼æ¨¡å¼
- âœ… Element Plus çµ„ä»¶åº«å·²æ•´åˆä¸”é‹ä½œè‰¯å¥½
- âœ… Pinia Auth Store å·²å»ºç«‹ï¼Œç”¨æ–¼ç®¡ç†èªè­‰ç‹€æ…‹
- âœ… JWT èªè­‰æ©Ÿåˆ¶å®Œå–„ï¼ˆ`@jwt_required()` è£é£¾å™¨ï¼‰
- âœ… Axios æ””æˆªå™¨å·²é…ç½®ï¼Œè™•ç†èªè­‰å’ŒéŒ¯èª¤
- âœ… è·¯ç”±å®ˆè¡›æ©Ÿåˆ¶å·²å»ºç«‹ï¼ˆ`requiresAuth` metaï¼‰
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆæ¨¡å¼å·²ç¢ºç«‹
- âœ… æ—¥æœŸæ ¼å¼åŒ–ä½¿ç”¨ Day.js
- âœ… éŒ¯èª¤è™•ç†æ¨¡å¼ï¼šå¾Œç«¯è¿”å›å…·é«”éŒ¯èª¤ï¼Œå‰ç«¯é¡¯ç¤ºå‹å–„è¨Šæ¯
- âœ… è¡¨å–®é©—è­‰ä½¿ç”¨ Element Plus Form Validation

**Brownfield å°ˆæ¡ˆèƒŒæ™¯**ï¼š
- å¾Œç«¯å»ºç«‹æ´»å‹• API å·²å®Œæ•´å¯¦ä½œï¼ˆ`POST /api/activities`ï¼‰
- ä¸»è¦å·¥ä½œæ˜¯**å»ºç«‹å‰ç«¯å»ºç«‹æ´»å‹•é é¢**å’Œ**æ•´åˆç¾æœ‰ API**
- éœ€è¦è¨­è¨ˆå„ªè³ªçš„è¡¨å–®é«”é©—ï¼ˆé©—è­‰ã€éŒ¯èª¤è™•ç†ã€éŸ¿æ‡‰å¼è¨­è¨ˆï¼‰

### Data Models

**Activity Model** [Source: backend/models/activity.py]
- **Table**: `activities`
- **Primary Key**: `activity_id` (Integer, Auto-increment)
- **å¿…å¡«æ¬„ä½**:
  - `title` (String(200), NOT NULL) - æ´»å‹•æ¨™é¡Œ
  - `date` (Date, NOT NULL) - æ´»å‹•æ—¥æœŸï¼ˆå‘å¾Œå…¼å®¹ï¼Œç­‰åŒæ–¼ start_dateï¼‰
  - `start_date` (Date) - æ´»å‹•é–‹å§‹æ—¥æœŸ
  - `location` (String(200), NOT NULL) - åœ°é»
  - `creator_id` (Integer, FK to users, NOT NULL) - å‰µå»ºè€… ID
- **é¸å¡«æ¬„ä½**:
  - `end_date` (Date) - æ´»å‹•çµæŸæ—¥æœŸ
  - `description` (Text) - æ´»å‹•æè¿°
  - `category` (String(50)) - æ´»å‹•é¡åˆ¥ï¼ˆadventure, culture, leisure, food, sports, etc.ï¼‰
  - `max_participants` (Integer, DEFAULT 2) - æœ€å¤§åƒèˆ‡äººæ•¸
  - `cost` (Numeric(10,2), DEFAULT 0.00) - é ä¼°è²»ç”¨
  - `status` (String(20), DEFAULT 'active') - æ´»å‹•ç‹€æ…‹ï¼ˆactive, completed, cancelledï¼‰
  - `cover_image` (String(500)) - å°é¢åœ–ç‰‡ URL
  - `images` (Text) - æ´»å‹•ç…§ç‰‡ URLsï¼ˆJSON æ ¼å¼ï¼‰
  - `meeting_point` (String(255)) - é›†åˆåœ°é»
  - `duration_hours` (Integer) - é è¨ˆæ™‚é•·ï¼ˆå°æ™‚ï¼‰
  - `difficulty_level` (String(20)) - é›£åº¦ç­‰ç´šï¼ˆeasy, medium, hardï¼‰
  - `gender_preference` (String(20)) - æ€§åˆ¥åå¥½ï¼ˆany, male, femaleï¼‰
  - `age_min` (Integer) - æœ€å°å¹´é½¡é™åˆ¶
  - `age_max` (Integer) - æœ€å¤§å¹´é½¡é™åˆ¶
  - `notes` (Text) - ç‰¹åˆ¥æ³¨æ„äº‹é …
- **è‡ªå‹•æ¬„ä½**:
  - `created_at` (DateTime, DEFAULT CURRENT_TIMESTAMP)
  - `updated_at` (DateTime, AUTO UPDATE)

**ActivityParticipant Model** [Source: backend/models/activity_participant.py]
- **Table**: `activity_participants`
- **Primary Key**: `participant_id` (Integer, Auto-increment)
- **ç›¸é—œæ¬„ä½**:
  - `activity_id` (Integer, FK to activities, NOT NULL)
  - `user_id` (Integer, FK to users, NOT NULL)
  - `status` (String(20), DEFAULT 'pending') - åƒèˆ‡ç‹€æ…‹ï¼ˆpending, approved, joined, rejected, left, removedï¼‰
  - `role` (String(20), DEFAULT 'participant') - è§’è‰²ï¼ˆcreator, participantï¼‰
  - `joined_at` (DateTime, DEFAULT CURRENT_TIMESTAMP)
  - `approved_at` (DateTime) - æ‰¹å‡†æ™‚é–“
  - `message` (Text) - ç”³è«‹è¨Šæ¯
  - `rejection_reason` (Text) - æ‹’çµ•åŸå› 

### API Specifications

**Endpoint**: `POST /api/activities` [Source: backend/blueprints/activities.py:58-109]

**Authentication**: Required (JWT Token)

**Request Headers**:
```
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

**Request Body**:
```json
{
  "title": "é™½æ˜å±±ç™»å±±ä¹‹æ—…",           // å¿…å¡«, String(200)
  "type": "adventure",                  // å¿…å¡«, String (å‰ç«¯ç”¨ 'type', å¾Œç«¯å­˜ç‚º 'category')
  "location": "é™½æ˜å±±åœ‹å®¶å…¬åœ’",         // å¿…å¡«, String(200)
  "start_date": "2025-11-15",          // å¿…å¡«, ISO date string
  "end_date": "2025-11-16",            // é¸å¡«, ISO date string
  "max_members": 10,                    // å¿…å¡«, Integer (å‰ç«¯ç”¨ 'max_members', å¾Œç«¯å­˜ç‚º 'max_participants')
  "description": "ä¸€èµ·å»çˆ¬å±±å§ï¼",      // é¸å¡«, Text
  "status": "open"                      // é¸å¡«, String (é»˜èª 'open')
}
```

**Response (Success - 201)**:
```json
{
  "message": "æ´»å‹•å‰µå»ºæˆåŠŸ",
  "activity": {
    "activity_id": 123,
    "title": "é™½æ˜å±±ç™»å±±ä¹‹æ—…",
    "category": "adventure",
    "location": "é™½æ˜å±±åœ‹å®¶å…¬åœ’",
    "date": "2025-11-15",
    "start_date": "2025-11-15",
    "end_date": "2025-11-16",
    "max_participants": 10,
    "description": "ä¸€èµ·å»çˆ¬å±±å§ï¼",
    "status": "open",
    "creator_id": 1,
    "created_at": "2025-11-05T10:30:00",
    "updated_at": "2025-11-05T10:30:00",
    "current_participants": 1,
    "cover_image": null,
    "images": null,
    // ...å…¶ä»–æ¬„ä½
  }
}
```

**Response (Error - 400)**:
```json
{
  "error": "title is required"
}
```

**Response (Error - 401)**:
```json
{
  "msg": "Missing Authorization Header"
}
```

**Response (Error - 500)**:
```json
{
  "error": "<éŒ¯èª¤è¨Šæ¯>"
}
```

**å¾Œç«¯é‚è¼¯é‡é»** [Source: backend/blueprints/activities.py]:
1. **è‡ªå‹•è™•ç†**:
   - å¾ JWT Token å–å¾— `current_user_id` è¨­å®šç‚º `creator_id`
   - å°‡å‰µå»ºè€…è‡ªå‹•åŠ å…¥ç‚ºåƒèˆ‡è€…ï¼ˆrole='creator', status='joined'ï¼‰
   - è¨­å®šæ´»å‹•é è¨­ç‹€æ…‹ç‚º 'open'

2. **æ¬„ä½æ˜ å°„**:
   - å‰ç«¯ `type` â†’ å¾Œç«¯ `category`
   - å‰ç«¯ `max_members` â†’ å¾Œç«¯ `max_participants`
   - å‰ç«¯ `start_date` â†’ å¾Œç«¯ `date` å’Œ `start_date` (å‘å¾Œå…¼å®¹)

3. **æ—¥æœŸè™•ç†**:
   - ä½¿ç”¨ `datetime.fromisoformat()` è§£æ ISO æ—¥æœŸå­—ä¸²
   - ç§»é™¤æ™‚å€æ¨™è¨˜ 'Z' ä¸¦æ›¿æ›ç‚º '+00:00'

### Component Specifications

**CreateActivity.vue Component** [æ–°å»ºç«‹æˆ–æ›´æ–°]

- **Location**: `frontend/src/views/CreateActivity.vue`
- **Type**: Page Component (Vue 3 SFC with Composition API)
- **Purpose**: é¡¯ç¤ºæ´»å‹•å»ºç«‹è¡¨å–®ä¸¦è™•ç†æäº¤

**å»ºè­°çµæ§‹**:
```vue
<template>
  <div class="create-activity-page">
    <div class="create-activity-container">
      <h1>å»ºç«‹æ–°æ´»å‹•</h1>
      
      <el-form
        ref="formRef"
        :model="activityForm"
        :rules="rules"
        label-width="120px"
        class="activity-form"
      >
        <!-- æ¨™é¡Œ -->
        <el-form-item label="æ´»å‹•æ¨™é¡Œ" prop="title" required>
          <el-input
            v-model="activityForm.title"
            placeholder="ä¾‹å¦‚ï¼šé™½æ˜å±±ç™»å±±ä¹‹æ—…"
            maxlength="200"
            show-word-limit
          />
        </el-form-item>
        
        <!-- æ´»å‹•é¡å‹ -->
        <el-form-item label="æ´»å‹•é¡å‹" prop="type" required>
          <el-select
            v-model="activityForm.type"
            placeholder="è«‹é¸æ“‡æ´»å‹•é¡å‹"
            style="width: 100%"
          >
            <el-option label="å†’éšª" value="adventure" />
            <el-option label="æ–‡åŒ–" value="culture" />
            <el-option label="ä¼‘é–’" value="leisure" />
            <el-option label="é‹å‹•" value="sports" />
            <el-option label="ç¾é£Ÿ" value="food" />
            <el-option label="å…¶ä»–" value="other" />
          </el-select>
        </el-form-item>
        
        <!-- åœ°é» -->
        <el-form-item label="æ´»å‹•åœ°é»" prop="location" required>
          <el-input
            v-model="activityForm.location"
            placeholder="ä¾‹å¦‚ï¼šå°åŒ—å¸‚é™½æ˜å±±åœ‹å®¶å…¬åœ’"
            maxlength="200"
          />
        </el-form-item>
        
        <!-- æ—¥æœŸç¯„åœ -->
        <el-form-item label="æ´»å‹•æ—¥æœŸ" prop="dateRange" required>
          <el-date-picker
            v-model="activityForm.dateRange"
            type="daterange"
            range-separator="åˆ°"
            start-placeholder="é–‹å§‹æ—¥æœŸ"
            end-placeholder="çµæŸæ—¥æœŸ"
            :disabledDate="disabledDate"
            style="width: 100%"
            format="YYYY-MM-DD"
            value-format="YYYY-MM-DD"
          />
        </el-form-item>
        
        <!-- äººæ•¸ä¸Šé™ -->
        <el-form-item label="äººæ•¸ä¸Šé™" prop="max_members" required>
          <el-input-number
            v-model="activityForm.max_members"
            :min="2"
            :max="50"
            style="width: 200px"
          />
          <span class="help-text">è‡³å°‘ 2 äººï¼Œæœ€å¤š 50 äºº</span>
        </el-form-item>
        
        <!-- é ä¼°è²»ç”¨ -->
        <el-form-item label="é ä¼°è²»ç”¨" prop="cost">
          <el-input-number
            v-model="activityForm.cost"
            :min="0"
            :precision="0"
            style="width: 200px"
          />
          <span class="help-text">NT$ (é¸å¡«)</span>
        </el-form-item>
        
        <!-- æ´»å‹•æè¿° -->
        <el-form-item label="æ´»å‹•æè¿°" prop="description">
          <el-input
            v-model="activityForm.description"
            type="textarea"
            :rows="6"
            placeholder="è«‹æè¿°æ´»å‹•å…§å®¹ã€è¡Œç¨‹å®‰æ’ã€æ³¨æ„äº‹é …ç­‰"
            maxlength="1000"
            show-word-limit
          />
        </el-form-item>
        
        <!-- æ“ä½œæŒ‰éˆ• -->
        <el-form-item>
          <el-button
            type="primary"
            :loading="loading"
            @click="handleSubmit"
          >
            {{ loading ? 'å»ºç«‹ä¸­...' : 'å»ºç«‹æ´»å‹•' }}
          </el-button>
          <el-button @click="handleCancel">
            å–æ¶ˆ
          </el-button>
        </el-form-item>
      </el-form>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage, ElMessageBox } from 'element-plus'
import { createActivity } from '@/api/activities'
import dayjs from 'dayjs'

// Router
const router = useRouter()

// Form Ref
const formRef = ref(null)

// Loading State
const loading = ref(false)

// Form Data
const activityForm = reactive({
  title: '',
  type: '',
  location: '',
  dateRange: [],
  max_members: 2,
  description: '',
  cost: null
})

// Validation Rules
const rules = {
  title: [
    { required: true, message: 'è«‹è¼¸å…¥æ´»å‹•æ¨™é¡Œ', trigger: 'blur' },
    { max: 200, message: 'æ¨™é¡Œé•·åº¦ä¸èƒ½è¶…é200å­—å…ƒ', trigger: 'blur' }
  ],
  type: [
    { required: true, message: 'è«‹é¸æ“‡æ´»å‹•é¡å‹', trigger: 'change' }
  ],
  location: [
    { required: true, message: 'è«‹è¼¸å…¥æ´»å‹•åœ°é»', trigger: 'blur' },
    { max: 200, message: 'åœ°é»é•·åº¦ä¸èƒ½è¶…é200å­—å…ƒ', trigger: 'blur' }
  ],
  dateRange: [
    { required: true, message: 'è«‹é¸æ“‡æ´»å‹•æ—¥æœŸ', trigger: 'change' }
  ],
  max_members: [
    { required: true, message: 'è«‹è¼¸å…¥äººæ•¸ä¸Šé™', trigger: 'blur' },
    { type: 'number', min: 2, max: 50, message: 'äººæ•¸éœ€åœ¨2-50ä¹‹é–“', trigger: 'blur' }
  ],
  description: [
    { max: 1000, message: 'æè¿°é•·åº¦å»ºè­°ä¸è¶…é1000å­—å…ƒ', trigger: 'blur' }
  ],
  cost: [
    { type: 'number', min: 0, message: 'è²»ç”¨ä¸èƒ½ç‚ºè² æ•¸', trigger: 'blur' }
  ]
}

// Disable past dates
const disabledDate = (time) => {
  return time.getTime() < Date.now() - 86400000 // 86400000 = 1 day in ms
}

// Methods
const handleSubmit = async () => {
  try {
    // Validate form
    const valid = await formRef.value.validate()
    if (!valid) return
    
    loading.value = true
    
    // Prepare data
    const [startDate, endDate] = activityForm.dateRange || []
    const activityData = {
      title: activityForm.title,
      type: activityForm.type,
      location: activityForm.location,
      start_date: startDate,
      end_date: endDate || null,
      max_members: activityForm.max_members,
      description: activityForm.description || '',
      status: 'open'
    }
    
    // Call API
    const response = await createActivity(activityData)
    
    // Success
    ElMessage.success('æ´»å‹•å»ºç«‹æˆåŠŸï¼')
    
    // Redirect to activity detail
    const activityId = response.data.activity.activity_id
    router.push(`/activities/${activityId}`)
    
  } catch (error) {
    console.error('å»ºç«‹æ´»å‹•å¤±æ•—:', error)
    
    // Handle authentication error
    if (error.response?.status === 401) {
      // Will be handled by axios interceptor
      return
    }
    
    // Display error message
    const errorMsg = error.response?.data?.error || 'å»ºç«‹æ´»å‹•å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦'
    ElMessage.error(errorMsg)
    
  } finally {
    loading.value = false
  }
}

const handleCancel = async () => {
  // Check if form has data
  const hasData = Object.values(activityForm).some(val => {
    if (Array.isArray(val)) return val.length > 0
    if (typeof val === 'number') return val !== 2 // default max_members
    return !!val
  })
  
  if (hasData) {
    try {
      await ElMessageBox.confirm(
        'æ‚¨æœ‰æœªå„²å­˜çš„è®Šæ›´ï¼Œç¢ºå®šè¦é›¢é–‹å—ï¼Ÿ',
        'æç¤º',
        {
          confirmButtonText: 'ç¢ºå®š',
          cancelButtonText: 'å–æ¶ˆ',
          type: 'warning'
        }
      )
    } catch {
      return // User cancelled
    }
  }
  
  router.push('/activities')
}
</script>

<style lang="scss" scoped>
.create-activity-page {
  min-height: 100vh;
  background: var(--el-bg-color-page);
  padding: var(--spacing-xl);
}

.create-activity-container {
  max-width: 800px;
  margin: 0 auto;
  background: var(--el-bg-color);
  padding: var(--spacing-xl);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--el-box-shadow-light);
  
  h1 {
    font-size: var(--font-size-h1);
    font-weight: var(--font-weight-bold);
    color: var(--el-text-color-primary);
    margin-bottom: var(--spacing-xl);
  }
}

.activity-form {
  .help-text {
    margin-left: var(--spacing-sm);
    font-size: var(--font-size-small);
    color: var(--el-text-color-secondary);
  }
}

// éŸ¿æ‡‰å¼
@media (max-width: 768px) {
  .create-activity-page {
    padding: var(--spacing-md);
  }
  
  .create-activity-container {
    padding: var(--spacing-md);
  }
  
  .activity-form {
    :deep(.el-form-item__label) {
      width: 100% !important;
      text-align: left;
      margin-bottom: var(--spacing-xs);
    }
    
    :deep(.el-form-item__content) {
      margin-left: 0 !important;
    }
  }
}
</style>
```

### File Locations

Based on [Source: architecture/3-å°ˆæ¡ˆçµæ§‹-project-structure.md]:

**Frontend**:
- å»ºç«‹æ´»å‹•é é¢: `frontend/src/views/CreateActivity.vue` (æ–°å»ºæˆ–æ›´æ–°)
- Activities API æœå‹™: `frontend/src/api/activities.js` (æ“´å±• - æ·»åŠ  createActivity)
- è·¯ç”±é…ç½®: `frontend/src/router/index.js` (ç¢ºèªå»ºç«‹æ´»å‹•è·¯ç”±)
- å‰ç«¯æ¸¬è©¦: `frontend/tests/unit/views/CreateActivity.spec.js` (æ–°å»º)

**Backend**:
- å»ºç«‹æ´»å‹•ç«¯é»: `backend/blueprints/activities.py` (å·²å­˜åœ¨ create_activity)
- Activity Model: `backend/models/activity.py`
- ActivityParticipant Model: `backend/models/activity_participant.py`
- å¾Œç«¯æ¸¬è©¦: `backend/tests/test_activities.py` (ç¢ºèªæˆ–æ“´å±•å»ºç«‹æ´»å‹•æ¸¬è©¦)

### Testing Requirements

Based on [Source: architecture/11-æ¸¬è©¦ç­–ç•¥-testing-requirements.md]:

**Unit Testing (Vitest)**:
- **Location**: `frontend/tests/unit/views/CreateActivity.spec.js`
- **Framework**: Vitest + @vue/test-utils + Element Plus
- **Coverage Target**: 80%+
- **Test Cases**:
  1. é é¢æ­£ç¢ºæ¸²æŸ“
  2. æ‰€æœ‰è¡¨å–®æ¬„ä½é¡¯ç¤º
  3. å¿…å¡«æ¬„ä½é©—è­‰
  4. æ¨™é¡Œé•·åº¦é©—è­‰ï¼ˆæœ€å¤š 200 å­—å…ƒï¼‰
  5. åœ°é»é•·åº¦é©—è­‰ï¼ˆæœ€å¤š 200 å­—å…ƒï¼‰
  6. æ—¥æœŸé©—è­‰ï¼ˆä¸æ—©æ–¼ä»Šå¤©ï¼‰
  7. çµæŸæ—¥æœŸé©—è­‰ï¼ˆä¸æ—©æ–¼é–‹å§‹æ—¥æœŸï¼‰
  8. äººæ•¸ç¯„åœé©—è­‰ï¼ˆ2-50ï¼‰
  9. è²»ç”¨éè² æ•¸é©—è­‰
  10. è¡¨å–®æäº¤æˆåŠŸï¼ˆMock APIï¼‰
  11. è¡¨å–®æäº¤å¤±æ•—ï¼ˆMock API errorï¼‰
  12. æˆåŠŸå¾Œè·³è½‰è‡³æ´»å‹•è©³æƒ…é 
  13. å–æ¶ˆæŒ‰éˆ•åŠŸèƒ½
  14. å–æ¶ˆæ™‚çš„ç¢ºèªå°è©±æ¡†

**Backend Testing (pytest)**:
- **Location**: `backend/tests/test_activities.py`
- **Framework**: pytest + pytest-flask
- **Test Cases**:
  - **å»ºç«‹æ´»å‹• API æ¸¬è©¦** (æ‡‰å·²å­˜åœ¨):
    1. æ¸¬è©¦æˆåŠŸå»ºç«‹æ´»å‹•
    2. æ¸¬è©¦å¿…å¡«æ¬„ä½é©—è­‰ï¼ˆtitle, type, location, start_date, max_membersï¼‰
    3. æ¸¬è©¦å‰µå»ºè€…è‡ªå‹•åŠ å…¥ç‚ºåƒèˆ‡è€…ï¼ˆrole='creator', status='joined'ï¼‰
    4. æ¸¬è©¦æ´»å‹•é è¨­ç‹€æ…‹ç‚º 'open'
    5. æ¸¬è©¦æœªèªè­‰è«‹æ±‚è¿”å› 401
    6. æ¸¬è©¦ç„¡æ•ˆæ•¸æ“šè¿”å› 400
    7. æ¸¬è©¦æ—¥æœŸè§£ææ­£ç¢º

**Running Tests**:
```bash
# Frontend
npm run test:unit

# Backend
pytest backend/tests/test_activities.py -v -k "create"
```

### Technical Constraints

[Source: architecture/2-å‰ç«¯æŠ€è¡“æ£§-frontend-tech-stack.md + PRD NFR]

1. **Framework Versions**:
   - Vue.js 3.3.8+
   - Element Plus 2.4.2+
   - Day.js 1.11.10+ (æ—¥æœŸè™•ç†)
   - Axios 1.6.0+ (HTTP è«‹æ±‚)

2. **Performance Requirements** [NFR1]:
   - API å›æ‡‰æ™‚é–“ < 1000ms
   - è¡¨å–®æ“ä½œéœ€æµæš¢ï¼Œç„¡æ˜é¡¯å»¶é²

3. **UI/UX Requirements**:
   - éŸ¿æ‡‰å¼è¨­è¨ˆï¼šæ¡Œé¢ (é›™æ¬„/å–®æ¬„) â†’ æ‰‹æ©Ÿ (å–®æ¬„)
   - ä½¿ç”¨ Element Plus Form Validation é€²è¡Œå³æ™‚é©—è­‰
   - éŒ¯èª¤è¨Šæ¯æ‡‰æ¸…æ™°ä¸”å…·é«”
   - æäº¤æ™‚é˜²æ­¢é‡è¤‡é»æ“Š

4. **Browser Support** [NFR3]:
   - Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

5. **Authentication**:
   - æ‰€æœ‰ API éœ€ JWT èªè­‰
   - è·¯ç”±éœ€ä½¿ç”¨ `requiresAuth` meta

### Project Structure Notes

[Source: architecture/3-å°ˆæ¡ˆçµæ§‹-project-structure.md]

**æ–°å¢ç›®éŒ„/æª”æ¡ˆ**:
- âœ… `frontend/src/views/CreateActivity.vue` - å»ºç«‹æ´»å‹•é é¢ï¼ˆå¯èƒ½å·²å­˜åœ¨ï¼Œéœ€æ›´æ–°ï¼‰
- âœ… `frontend/tests/unit/views/CreateActivity.spec.js` - å–®å…ƒæ¸¬è©¦

**ä¿®æ”¹æª”æ¡ˆ**:
- âœ… `frontend/src/api/activities.js` - æ·»åŠ  createActivity å‡½æ•¸
- âœ… `frontend/src/router/index.js` - ç¢ºèªå»ºç«‹æ´»å‹•è·¯ç”±é…ç½®
- âœ… `backend/tests/test_activities.py` - ç¢ºèªå»ºç«‹æ´»å‹•æ¸¬è©¦å®Œæ•´

**ç„¡çµæ§‹è¡çª**ï¼šæ‰€æœ‰æ–°å¢æª”æ¡ˆç¬¦åˆç¾æœ‰å°ˆæ¡ˆçµæ§‹ã€‚

### Additional Notes

**å‰å¾Œç«¯æ¬„ä½æ˜ å°„**ï¼š
- å‰ç«¯ä½¿ç”¨ `type` â†’ å¾Œç«¯å­˜ç‚º `category`
- å‰ç«¯ä½¿ç”¨ `max_members` â†’ å¾Œç«¯å­˜ç‚º `max_participants`
- éœ€åœ¨ API èª¿ç”¨æ™‚é€²è¡Œæ˜ å°„

**æ—¥æœŸè™•ç†**ï¼š
- å‰ç«¯ä½¿ç”¨ Day.js è™•ç†æ—¥æœŸ
- Element Plus DatePicker ä½¿ç”¨ `value-format="YYYY-MM-DD"` ç›´æ¥è¼¸å‡º ISO æ—¥æœŸå­—ä¸²
- å¾Œç«¯ä½¿ç”¨ `datetime.fromisoformat()` è§£æ

**åœ–ç‰‡ä¸Šå‚³**ï¼š
- å¾Œç«¯ Activity Model æœ‰ `cover_image` æ¬„ä½
- ç›®å‰æš«ä¸å¯¦ä½œåœ–ç‰‡ä¸Šå‚³åŠŸèƒ½ï¼ˆæ¨™è¨˜ç‚ºé¸åšï¼‰
- è‹¥éœ€è¦å¯¦ä½œï¼Œéœ€ç¢ºèªå¾Œç«¯ä¸Šå‚³ API æ˜¯å¦å·²å®Œæˆ

**è¡¨å–® UX å„ªåŒ–å»ºè­°**ï¼š
1. ä½¿ç”¨æ—¥æœŸç¯„åœé¸æ“‡å™¨ï¼ˆ`type="daterange"`ï¼‰æå‡ UX
2. æ·»åŠ å³æ™‚å­—æ•¸çµ±è¨ˆï¼ˆ`show-word-limit`ï¼‰
3. æäº¤å‰é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹ï¼Œé˜²æ­¢é‡è¤‡æäº¤
4. å–æ¶ˆæ™‚è‹¥æœ‰æœªå„²å­˜è®Šæ›´ï¼Œé¡¯ç¤ºç¢ºèªå°è©±æ¡†
5. ä½¿ç”¨ help-text æä¾›æ¬„ä½èªªæ˜

**å¾ŒçºŒ Story é—œè¯**ï¼š
- Story 2.2 å°‡å¯¦ä½œæ´»å‹•åˆ—è¡¨èˆ‡ç¯©é¸åŠŸèƒ½
- Story 2.3 å°‡å¯¦ä½œæ´»å‹•è©³æƒ…é é¢
- Story 2.4 å°‡å¯¦ä½œæ´»å‹•ç‹€æ…‹ç®¡ç†
- Story 2.5 å°‡å¯¦ä½œæ´»å‹•åƒèˆ‡ç”³è«‹èˆ‡å¯©æ ¸

## Testing

### Frontend Testing
```bash
# åŸ·è¡Œå–®å…ƒæ¸¬è©¦
npm run test:unit

# åŸ·è¡Œå¸¶è¦†è“‹ç‡çš„æ¸¬è©¦
npm run test:coverage

# UI æ¸¬è©¦æ¨¡å¼
npm run test:ui
```

### Backend Testing
```bash
# åŸ·è¡Œå»ºç«‹æ´»å‹• API æ¸¬è©¦
pytest backend/tests/test_activities.py::test_create_activity -v

# åŸ·è¡Œæ‰€æœ‰æ´»å‹•ç›¸é—œæ¸¬è©¦
pytest backend/tests/test_activities.py -v

# å¸¶è¦†è“‹ç‡å ±å‘Š
pytest backend/tests/test_activities.py --cov=backend/blueprints/activities --cov-report=html
```

### Manual Testing Checklist

- [ ] è¨ªå•å»ºç«‹æ´»å‹•é é¢ï¼ˆéœ€ç™»å…¥ï¼‰
- [ ] è¡¨å–®æ‰€æœ‰æ¬„ä½æ­£ç¢ºé¡¯ç¤º
- [ ] å¿…å¡«æ¬„ä½é©—è­‰ï¼ˆæ¨™é¡Œã€é¡å‹ã€åœ°é»ã€æ—¥æœŸã€äººæ•¸ï¼‰
- [ ] æ¨™é¡Œé•·åº¦é™åˆ¶é©—è­‰ï¼ˆæœ€å¤š 200 å­—å…ƒï¼‰
- [ ] æ—¥æœŸé©—è­‰ï¼ˆä¸èƒ½é¸æ“‡éå»çš„æ—¥æœŸï¼‰
- [ ] çµæŸæ—¥æœŸé‚è¼¯é©—è­‰ï¼ˆä¸æ—©æ–¼é–‹å§‹æ—¥æœŸï¼‰
- [ ] äººæ•¸ç¯„åœé©—è­‰ï¼ˆ2-50 ä¹‹é–“ï¼‰
- [ ] è²»ç”¨éè² æ•¸é©—è­‰
- [ ] æˆåŠŸå»ºç«‹æ´»å‹•ä¸¦è·³è½‰è‡³è©³æƒ…é 
- [ ] é©—è­‰å‰µå»ºè€…å·²åœ¨åƒèˆ‡è€…åˆ—è¡¨ä¸­
- [ ] é©—è­‰æ´»å‹•ç‹€æ…‹ç‚ºã€Œæ‹›å‹Ÿä¸­ã€
- [ ] å–æ¶ˆæŒ‰éˆ•åŠŸèƒ½èˆ‡ç¢ºèªå°è©±æ¡†
- [ ] ç¶²è·¯éŒ¯èª¤è™•ç†
- [ ] èªè­‰ä¿è­·ï¼ˆæœªç™»å…¥è·³è½‰è‡³ç™»å…¥é ï¼‰
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ¡Œé¢/æ‰‹æ©Ÿæ¨¡å¼ï¼‰
- [ ] API å›æ‡‰æ™‚é–“ < 1000ms

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-05 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

*æ­¤å€å¡Šç”±é–‹ç™¼ä»£ç†åœ¨å¯¦ä½œæ™‚å¡«å¯«*

### Agent Model Used

(å¾…é–‹ç™¼ä»£ç†å¡«å¯«)

### Debug Log References

(å¾…é–‹ç™¼ä»£ç†å¡«å¯«)

### Completion Notes List

(å¾…é–‹ç™¼ä»£ç†å¡«å¯«)

### File List

(å¾…é–‹ç™¼ä»£ç†å¡«å¯«)

## QA Results

*æ­¤å€å¡Šç”± QA ä»£ç†å¯©æŸ¥å¾Œæ›´æ–°å¯©æŸ¥çµæœ*
