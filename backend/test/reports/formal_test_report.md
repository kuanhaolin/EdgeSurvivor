# (一) 整合測試項目總表

**測試系統名稱**: EdgeSurvivor  
**測試目標**: 驗證後端 API 的完整功能流程，包含認證、媒合、活動管理與端對端情境。  
**測試方式**: 以 pytest 進行自動化整合測試  

| 測試個案編號 | 模組分類 | 測試個案名稱 | 測試結果 |
| :--- | :--- | :--- | :--- |
| **IT_1_1** | 認證管理 | 測試完整註冊與登入流程 | 通過 |
| **IT_1_2** | 認證管理 | 測試使用錯誤憑證登入 | 通過 |
| **IT_1_3** | 認證管理 | 測試重複 Email 註冊 | 通過 |
| **IT_1_4** | 認證管理 | 測試 Token 刷新流程 | 通過 |
| **IT_1_5** | 個人資料 | 測試更新個人資料 | 通過 |
| **IT_1_6** | 個人資料 | 測試社群帳號連結 | 通過 |
| **IT_1_7** | 個人資料 | 測試社群隱私設定 | 通過 |
| **IT_1_8** | 帳號管理 | 測試刪除帳號 | 通過 |
| **IT_1_9** | 帳號管理 | 測試已刪除帳號無法登入 | 通過 |
| **IT_2_1** | 好友媒合 | 測試完整好友申請流程 | 通過 |
| **IT_2_2** | 好友媒合 | 測試拒絕好友請求 | 通過 |
| **IT_2_3** | 好友媒合 | 測試刪除好友 | 通過 |
| **IT_2_4** | 好友媒合 | 測試用戶篩選與搜尋 | 通過 |
| **IT_2_5** | 聊天功能 | 測試好友間發送訊息 | 通過 |
| **IT_2_6** | 聊天功能 | 測試取得聊天記錄 | 通過 |
| **IT_2_7** | 聊天功能 | 測試無法向非好友發送訊息 | 通過 |
| **IT_2_8** | 推薦系統 | 測試取得推薦用戶 | 通過 |
| **IT_3_1** | 活動管理 | 測試建立活動 | 通過 |
| **IT_3_2** | 活動管理 | 測試更新活動 | 通過 |
| **IT_3_3** | 活動管理 | 測試刪除活動 | 通過 |
| **IT_3_4** | 活動管理 | 測試非建立者無法更新活動 | 通過 |
| **IT_3_5** | 活動參與 | 測試完整參與流程 (申請/審核) | 通過 |
| **IT_3_6** | 活動參與 | 測試拒絕參與申請 | 通過 |
| **IT_3_7** | 活動參與 | 測試移除參與者 | 通過 |
| **IT_3_8** | 活動參與 | 測試參與者人數上限 | 通過 |
| **IT_3_9** | 活動討論 | 測試發表討論 | 通過 |
| **IT_3_10** | 活動討論 | 測試刪除討論 | 通過 |
| **IT_3_11** | 費用管理 | 測試新增費用 | 通過 |
| **IT_3_12** | 費用管理 | 測試費用分攤計算 | 通過 |
| **IT_4_1** | E2E情境 | 完整活動生命週期測試 | 通過 |
| **IT_4_2** | E2E情境 | 好友與活動互動流程測試 | 通過 |

---

# (二) 各整合測試內容

## 1. 使用者與認證系統 (IT_1_X)

| 測試編號 | 測試目標 | 測試步驟 | 測試結果 |
| :--- | :--- | :--- | :--- |
| **IT_1_1** | 驗證使用者可以成功註冊新帳號並使用該帳號登入。 | 1. 使用未註冊的 Email 與資料呼叫註冊 API。<br>2. 驗證資料庫中是否正確建立使用者資料。<br>3. 使用剛註冊的帳號密碼呼叫登入 API。<br>4. 使用回傳的 Token 取得使用者個人資料。 | 通過 (Passed) |
| **IT_1_2** | 驗證系統能正確拒絕錯誤的登入憑證。 | 1. 使用正確的 Email 但錯誤的密碼呼叫登入 API。<br>2. 驗證 API 回傳 401 Unauthorized 錯誤。 | 通過 (Passed) |
| **IT_1_3** | 驗證系統不允許重複的 Email 註冊。 | 1. 使用已經存在的 Email 呼叫註冊 API。<br>2. 驗證 API 回傳 400 Bad Request 錯誤。 | 通過 (Passed) |
| **IT_1_4** | 驗證 Access Token 過期後可使用 Refresh Token 取得新 Token。 | 1. 登入取得 Refresh Token。<br>2. 使用 Refresh Token 呼叫刷新 API。<br>3. 驗證取得新的 Access Token。 | 通過 (Passed) |
| **IT_1_5** | 驗證使用者可以更新個人資料。 | 1. 呼叫更新個人資料 API (修改名稱、簡介、地點)。<br>2. 驗證資料庫中的資料已更新。 | 通過 (Passed) |
| **IT_1_6** | 驗證使用者可以連結社群帳號。 | 1. 呼叫更新 API 加入 Instagram/Facebook 連結。<br>2. 驗證資料庫中的社群欄位已更新。 | 通過 (Passed) |
| **IT_1_7** | 驗證社群隱私設定 (僅好友可見) 功能。 | 1. 設定社群隱私為 `friends_only`。<br>2. 使用非好友帳號查詢該使用者資料，驗證看不到社群連結。<br>3. (後續配合好友測試驗證好友可見) | 通過 (Passed) |
| **IT_1_8** | 驗證使用者可以刪除自己的帳號。 | 1. 提供正確密碼呼叫刪除帳號 API。<br>2. 驗證使用者資料已從資料庫移除。 | 通過 (Passed) |
| **IT_1_9** | 驗證已刪除的帳號無法再登入。 | 1. 刪除帳號。<br>2. 嘗試使用原帳號密碼登入。<br>3. 驗證 API 回傳 401 錯誤。 | 通過 (Passed) |

## 2. 社交互動系統 (IT_2_X)

| 測試編號 | 測試目標 | 測試步驟 | 測試結果 |
| :--- | :--- | :--- | :--- |
| **IT_2_1** | 驗證完整的好友申請與接受流程。 | 1. 用戶 A 發送好友請求給用戶 B。<br>2. 用戶 B 查看待審核請求。<br>3. 用戶 B 接受請求。<br>4. 驗證雙方狀態變為 `accepted`。<br>5. 驗證雙方可查看彼此的隱私社群連結。 | 通過 (Passed) |
| **IT_2_2** | 驗證拒絕好友請求的功能。 | 1. 建立一筆待審核的好友請求。<br>2. 接收方呼叫拒絕 API。<br>3. 驗證請求狀態變為 `rejected`。 | 通過 (Passed) |
| **IT_2_3** | 驗證刪除好友的功能。 | 1. 建立已存在的好友關係。<br>2. 其中一方呼叫刪除好友 API。<br>3. 驗證好友關係記錄已移除。 | 通過 (Passed) |
| **IT_2_4** | 驗證使用者列表的篩選功能。 | 1. 使用性別 (Gender) 參數呼叫使用者列表 API。<br>2. 使用地點 (Location) 參數呼叫使用者列表 API。<br>3. 驗證回傳結果符合篩選條件。 | 通過 (Passed) |
| **IT_2_5** | 驗證好友之間可以發送私訊。 | 1. 確保雙方為好友關係。<br>2. 發送聊天訊息。<br>3. 驗證訊息已寫入資料庫。 | 通過 (Passed) |
| **IT_2_6** | 驗證可以取得歷史聊天記錄。 | 1. 預先建立數筆聊天訊息。<br>2. 呼叫取得訊息 API。<br>3. 驗證回傳的訊息數量與內容正確。 | 通過 (Passed) |
| **IT_2_7** | 驗證非好友無法發送私訊。 | 1. 嘗試向非好友發送訊息。<br>2. 驗證 API 回傳 403 Forbidden 錯誤。 | 通過 (Passed) |
| **IT_2_8** | 驗證推薦使用者功能。 | 1. 呼叫推薦使用者 API。<br>2. 驗證回傳列表格式正確且不包含自己。 | 通過 (Passed) |

## 3. 活動管理系統 (IT_3_X)

| 測試編號 | 測試目標 | 測試步驟 | 測試結果 |
| :--- | :--- | :--- | :--- |
| **IT_3_1** | 驗證使用者可以建立新活動。 | 1. 準備活動資料 (標題、時間、地點等)。<br>2. 呼叫建立活動 API。<br>3. 驗證活動已建立且建立者 ID 正確。 | 通過 (Passed) |
| **IT_3_2** | 驗證建立者可以更新活動資訊。 | 1. 呼叫更新活動 API 修改標題與人數上限。<br>2. 驗證資料庫中的活動資料已更新。 | 通過 (Passed) |
| **IT_3_3** | 驗證建立者可以刪除活動。 | 1. 呼叫刪除活動 API。<br>2. 驗證活動被標記為非活躍或已刪除。 | 通過 (Passed) |
| **IT_3_4** | 驗證非建立者無法修改活動。 | 1. 使用其他使用者的 Token 嘗試更新活動。<br>2. 驗證 API 回傳 403 Forbidden 錯誤。 | 通過 (Passed) |
| **IT_3_5** | 驗證活動報名與審核流程。 | 1. 其他使用者申請加入活動。<br>2. 建立者批准該申請。<br>3. 驗證參與者狀態變為 `approved`。 | 通過 (Passed) |
| **IT_3_6** | 驗證拒絕活動申請的功能。 | 1. 建立一筆待審核的申請。<br>2. 建立者拒絕該申請。<br>3. 驗證參與者狀態變為 `rejected`。 | 通過 (Passed) |
| **IT_3_7** | 驗證移除參與者的功能。 | 1. 建立者呼叫移除參與者 API。<br>2. 驗證參與者記錄被移除或標記為 `removed`。 | 通過 (Passed) |
| **IT_3_8** | 驗證活動人數上限限制。 | 1. 設定活動人數上限 (例如 2 人)。<br>2. 加入足夠人數填滿名額。<br>3. 嘗試加入更多使用者。<br>4. 驗證 API 回傳 400 錯誤 (人數已滿)。 | 通過 (Passed) |
| **IT_3_9** | 驗證活動討論區發表功能。 | 1. 在活動中發表留言。<br>2. 驗證留言已寫入資料庫。 | 通過 (Passed) |
| **IT_3_10** | 驗證刪除討論留言的功能。 | 1. 建立者刪除一則留言。<br>2. 驗證留言被標記為 `is_deleted`。 | 通過 (Passed) |
| **IT_3_11** | 驗證新增活動費用的功能。 | 1. 輸入金額、用途與付款人。<br>2. 呼叫新增費用 API。<br>3. 驗證費用記錄已建立。 | 通過 (Passed) |
| **IT_3_12** | 驗證費用分攤計算功能。 | 1. 建立包含多位參與者的活動。<br>2. 新增一筆費用並選擇平分。<br>3. 驗證系統正確計算每人應分攤金額。 | 通過 (Passed) |

## 4. 整合情境測試 (IT_4_X)

| 測試編號 | 測試目標 | 測試步驟 | 測試結果 |
| :--- | :--- | :--- | :--- |
| **IT_4_1** | 驗證完整的活動生命週期 (從建立到結束互評)。 | 1. 用戶註冊並登入。<br>2. 建立活動。<br>3. 多位用戶申請並獲准加入。<br>4. 發表討論與新增費用。<br>5. 活動結束後，參與者對建立者進行評價。<br>6. 驗證建立者的評分數據已更新。 | 通過 (Passed) |
| **IT_4_2** | 驗證好友互動與活動結合的流程。 | 1. 兩位用戶建立好友關係。<br>2. 一方建立活動，另一方收到通知並加入。<br>3. 好友間進行私訊。<br>4. 活動結束後進行互評。 | 通過 (Passed) |
